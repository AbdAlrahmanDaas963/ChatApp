(this.webpackJsonpfull=this.webpackJsonpfull||[]).push([[0],{43:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(19),c=a.n(n),s=a(36),r=a.n(s),i=(a(43),a(0)),l=a.n(i),o=a(1),u=a(13),d=a(21),j=(a(45),a(35),a(37)),h=a(12);var b=function(e){var t=e.onClick,a=void 0===t?null:t,n=e.children,c=void 0===n?null:n;return Object(h.jsx)("button",{onClick:a,children:c})},p=a(32),m=a(51);var v=function(e){var t=e.createdAt,a=void 0===t?null:t,n=e.text,c=void 0===n?"":n,s=e.displayName,r=void 0===s?"":s,i=e.photoURL,l=void 0===i?"":i;return c?Object(h.jsxs)("div",{className:"msg",children:[Object(h.jsx)("div",{className:"img",children:l?Object(h.jsx)("img",{src:l,alt:"Avatar",className:"rounded-full mr-4",width:45,height:45}):null}),Object(h.jsxs)("div",{className:"body",children:[Object(h.jsxs)("div",{className:"header",children:[Object(h.jsx)("div",{className:"name",children:r?Object(h.jsx)("p",{children:r}):null}),Object(h.jsx)("div",{className:"date",children:(null===a||void 0===a?void 0:a.seconds)?Object(h.jsx)("p",{children:function(e){var t="";return e&&(t=(t=Object(m.a)(e,new Date)).charAt(0).toUpperCase()+t.slice(1)),t}(new Date(1e3*a.seconds))}):null})]}),Object(h.jsx)("div",{className:"content",children:Object(h.jsx)("div",{children:c})})]})]}):null};var O=function(e){var t=e.user,a=void 0===t?null:t,s=Object(n.useState)([]),r=Object(u.a)(s,2),i=r[0],l=r[1],o=Object(n.useState)(""),j=Object(u.a)(o,2),b=j[0],m=j[1],O=Object(n.useState)([]),f=Object(u.a)(O,2),g=(f[0],f[1]),x=a.uid,N=a.displayName,w=a.photoURL,y=d.a.firestore(),S=y.collection("messages").orderBy("createdAt").limit(100),k=y.collection("messages"),A=c.a.createRef();return Object(n.useEffect)((function(){return S.onSnapshot((function(e){var t=e.docs.map((function(e){return Object(p.a)(Object(p.a)({},e.data()),{},{id:e.id})}));g(t),l(t),console.log("data :",t)}))}),[]),Object(h.jsxs)("div",{className:"channel",children:[" ",Object(h.jsx)("ul",{className:"messages",children:i.map((function(e){return Object(h.jsx)("li",{children:Object(h.jsx)(v,Object(p.a)({},e))},e.id)}))}),Object(h.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault();var t=b.trim();t&&(k.add({text:t,createdAt:d.a.firestore.FieldValue.serverTimestamp(),uid:x,displayName:N,photoURL:w}),m(""))},children:[Object(h.jsx)("input",{ref:A,className:"inpt-msg",type:"text",value:b,onChange:function(e){m(e.target.value)},placeholder:"Type your message here..."}),Object(h.jsx)("button",{type:"submit",className:"send-btn",disabled:!b,children:Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"44.085",height:"42.037",viewBox:"0 0 44.085 42.037",children:Object(h.jsx)("path",{id:"ic_send_24px",d:"M2.017,29.748,37.089,16.374,2.017,3,2,13.4l25.063,2.972L2,19.346Z",transform:"matrix(0.819, -0.574, 0.574, 0.819, -3.359, 18.816)",fill:"#57bdeb"})})})]})]})},f=d.a.initializeApp({apiKey:"AIzaSyDzJe-_lbLQF2xdplc-YpnjAzKMqA8-hGE",authDomain:"chatapp-130f1.firebaseapp.com",projectId:"chatapp-130f1",storageBucket:"chatapp-130f1.appspot.com",messagingSenderId:"334904828589",appId:"1:334904828589:web:8d19c0daba5d77abc7dc24",measurementId:"G-BMW45Q5EEP"});Object(j.a)(f);var g=function(){var e=Object(n.useState)(!0),t=Object(u.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)((function(){return d.a.auth.currentUser})),r=Object(u.a)(s,2),i=r[0],j=r[1];Object(n.useEffect)((function(){return d.a.auth().onAuthStateChanged((function(e){j(e||!1),a&&c(!1),console.log("user :",e)}))}),[a]);var p=function(){var e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new d.a.auth.GoogleAuthProvider,d.a.auth().useDeviceLanguage(),e.prev=2,e.next=5,d.a.auth().signInWithPopup(t);case 5:console.log("logged in"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.auth().signOut();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"app",children:[Object(h.jsxs)("div",{className:"navbar",children:[Object(h.jsx)("div",{className:"logo",children:"Chat"}),i?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(b,{onClick:m,children:"Sign out"})}):Object(h.jsx)(b,{onClick:p,children:"Sign in with Google"})]}),i&&Object(h.jsx)(O,{user:i})]})},x=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,52)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))};r.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(g,{})}),document.getElementById("root")),x()}},[[49,1,2]]]);
//# sourceMappingURL=main.b258e925.chunk.js.map